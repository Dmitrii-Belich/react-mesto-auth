{"version":3,"sources":["images/logo.svg","utils/constants.js","utils/Api.js","utils/auth.js","contexts/CurrentUserContext.js","components/Header.js","components/Footer.js","components/Card.js","components/Main.js","components/Popup.js","components/PopupWithImage.js","components/ui/Input.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/ProtectedRoute.js","components/Sign.js","components/InfoTooltip.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","authOptions","BASE_URL","headers","api","baseUrl","this","_baseUrl","_headers","_defaultCheck","res","ok","json","Promise","reject","status","fetch","then","id","method","object","body","JSON","stringify","link","card","authorization","register","user","authorize","CurrentUserContext","React","createContext","Header","email","onExit","className","src","logo","alt","path","to","exact","onClick","Footer","Date","getFullYear","Card","onCardClick","url","title","likes","ownerId","cardId","onCardLike","onCardDelete","userId","useContext","_id","isLiked","some","item","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","onLike","onDelete","name","about","avatar","map","owner","key","Popup","isOpen","onClose","children","PopupWithImage","Input","place","pattern","required","placeholder","value","maxLength","minLength","onChange","type","update","useState","isInputValid","setIsInputValid","validationMessage","setValidationMessage","useEffect","evt","target","validity","valid","PopupWithForm","onSubmit","buttonText","isFormValid","noValidate","disabled","EditProfilePopup","onUpdateUser","currentUser","description","setValidity","setButtonText","setName","setDescription","inputChangers","inputHandler","inputValidity","newValidity","Object","assign","clearInput","setTimeout","preventDefault","catch","values","reduce","summ","currentItem","EditAvatarPopup","onUpdateAvatar","setUrl","AddPlacePopup","setTitle","ProtectedRoute","Component","component","forRegistered","props","loggedIn","Sign","password","setEmail","setPassword","check","InfoTooltip","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","App","editPopupState","setEditPopupState","addPopupState","setAddPopupState","avatarPopupState","setAvatarPopupState","deletePopupState","setDeletePopupState","imgPopupState","setImgPopupState","toolPopupState","setToolPopupState","toolPopupStatus","setToolPopupStatus","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","localStorage","getItem","token","setToken","userEmail","setUserEmail","history","useHistory","Authorization","data","checkToken","err","console","log","errShow","escHandler","closeAllPopups","all","getUserInformation","getInitialCards","document","removeEventListener","handleUpdateUser","a","isSucssesful","setUserInfo","resolve","handleUpdateAvatar","setUserAvatar","handleAddPlaceSubmit","createCard","newCard","handleDeleteSubmit","deleteCard","newCards","filter","onRegister","push","message","error","onAuthorize","setItem","Provider","removeItem","addEventListener","likeShow","deleteLike","setLike","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.142a20d3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e889e45f.svg\";","export const apiOptions = {\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-12\",\r\n  headers: {\r\n    authorization: \"10d0cab2-3de3-42ea-80c8-2e15574d2bdb\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nexport const authOptions = {\r\n  BASE_URL: \"https://auth.nomoreparties.co\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n","import { apiOptions } from \"./constants.js\";\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n    this._defaultCheck = (res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    };\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, { headers: this._headers }).then(\r\n      this._defaultCheck\r\n    );\r\n  }\r\n\r\n  getUserInformation() {\r\n    return fetch(`${this._baseUrl}/users/me`, { headers: this._headers }).then(\r\n      this._defaultCheck\r\n    );\r\n  }\r\n\r\n  setLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  setUserInfo(object) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(object),\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  setUserAvatar(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(link),\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  createCard(card) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(card),\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._defaultCheck);\r\n  }\r\n}\r\n\r\nexport const api = new Api(apiOptions);\r\n","import { authOptions } from \"./constants\";\r\n\r\nexport const register = (user) => {\r\n  return fetch(`${authOptions.BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: authOptions.headers,\r\n    body: JSON.stringify(user),\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(res.json());\r\n  });\r\n};\r\n\r\nexport const authorize = (user) => {\r\n  return fetch(`${authOptions.BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers: authOptions.headers,\r\n    body: JSON.stringify(user),\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(res.json());\r\n  });\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${authOptions.BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      ...authOptions.headers,\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => data);\r\n};\r\n","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from \"react\";\r\nimport { Link, Route } from \"react-router-dom\";\r\n\r\nimport logo from \"../images/logo.svg\";\r\n\r\nexport default function Header({ email, onExit }) {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__wrapper\">\r\n        <img src={logo} alt=\"Логотип\" className=\"header__logo\" />\r\n        <Route path=\"/sign-up\">\r\n          <Link to=\"/sign-in\" className=\"header__link\">\r\n            Войти\r\n          </Link>\r\n        </Route>\r\n        <Route path=\"/sign-in\">\r\n          <Link to=\"/sign-up\" className=\"header__link\">\r\n            Регистрация\r\n          </Link>\r\n        </Route>\r\n        <Route exact path=\"/\">\r\n          <div className=\"header__info\">\r\n            <p className=\"header__email\">{email}</p>\r\n            <button to=\"/\" className=\"header__exit\" onClick={onExit}>\r\n              Выйти\r\n            </button>\r\n          </div>\r\n        </Route>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">\r\n        &copy; {new Date().getFullYear()} Mesto Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Card({\r\n  onCardClick,\r\n  url,\r\n  title,\r\n  likes,\r\n  ownerId,\r\n  cardId,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const { _id: userId } = React.useContext(CurrentUserContext);\r\n\r\n  const isLiked = likes.some((item) => {\r\n    return item._id === userId;\r\n  });\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <img\r\n        alt=\"Изображение карточки\"\r\n        className=\"card__image\"\r\n        onClick={() => {\r\n          onCardClick({\r\n            url: url,\r\n            title: title,\r\n          });\r\n        }}\r\n        src={url}\r\n      />\r\n      <h2 className=\"card__title\">{title}</h2>\r\n      <button\r\n        onClick={() => {\r\n          onCardLike(cardId, isLiked);\r\n        }}\r\n        className={`card__like ${isLiked && \"card__like_mode_active\"}`}\r\n      ></button>\r\n      <p className=\"card__like-count\">{likes.length}</p>\r\n      {ownerId === userId && (\r\n        <button\r\n          className=\"card__delete\"\r\n          onClick={() => {\r\n            onCardDelete(cardId);\r\n          }}\r\n        ></button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nimport Card from \"./Card.js\";\r\n\r\nexport default function Main({\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onCardClick,\r\n  cards,\r\n  onLike,\r\n  onDelete,\r\n}) {\r\n  const { name, about, avatar } = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__inner-wrapper profile__inner-wrapper_place_profile\">\r\n          <img alt=\"Аватар\" className=\"profile__avatar\" src={avatar} />\r\n          <button\r\n            className=\"profile__avatar-overlay\"\r\n            onClick={onEditAvatar}\r\n          ></button>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__inner-wrapper profile__inner-wrapper_place_name\">\r\n              <h1 className=\"profile__name\">{name}</h1>\r\n              <button\r\n                className=\"profile__edit-button\"\r\n                onClick={onEditProfile}\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__subtitle\">{about}</p>\r\n          </div>\r\n        </div>\r\n        <button className=\"profile__add-button\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"card__container\">\r\n        {cards.map((item) => {\r\n          return (\r\n            <Card\r\n              onCardClick={onCardClick}\r\n              likes={item.likes}\r\n              ownerId={item.owner._id}\r\n              key={item._id}\r\n              title={item.name}\r\n              url={item.link}\r\n              cardId={item._id}\r\n              onCardLike={onLike}\r\n              onCardDelete={onDelete}\r\n            />\r\n          );\r\n        })}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Popup({ isOpen, onClose, children }) {\r\n  return (\r\n    <div className={`popup ${isOpen && \"popup_display_opened\"}`}>\r\n      {children}\r\n      <div className=\"popup__overlay\" onClick={onClose}></div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function PopupWithImage({ isOpen, card, onClose }) {\r\n  return (\r\n    <Popup isOpen={isOpen} onClose={onClose}>\r\n      <div className=\"popup__image-container\">\r\n        <img alt={card.title} className=\"popup__image\" src={card.url} />\r\n        <h2 className=\"popup__image-title\">{card.title}</h2>\r\n        <button className=\"popup__exit-button\" onClick={onClose}></button>\r\n      </div>\r\n    </Popup>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Input({\r\n  place = \"popup\",\r\n  name,\r\n  pattern,\r\n  required,\r\n  placeholder,\r\n  value,\r\n  maxLength,\r\n  minLength,\r\n  onChange,\r\n  type,\r\n  update,\r\n}) {\r\n  const [isInputValid, setIsInputValid] = React.useState(true);\r\n  const [validationMessage, setValidationMessage] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    setIsInputValid(true);\r\n    setValidationMessage(\"\");\r\n  }, [update]);\r\n\r\n  const changeHandler = (evt) => {\r\n    onChange(evt.target.value, name, evt.target.validity.valid);\r\n    setIsInputValid(evt.target.validity.valid);\r\n    setValidationMessage(evt.target.validationMessage);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type={type}\r\n        className={`${place}__input ${\r\n          !isInputValid && `${place}__input_display_error`\r\n        }`}\r\n        pattern={pattern}\r\n        name={name}\r\n        required={required}\r\n        placeholder={placeholder}\r\n        onChange={changeHandler}\r\n        value={value}\r\n        maxLength={maxLength}\r\n        minLength={minLength}\r\n      />\r\n      <span className={`${place}__input-error`}>{validationMessage}</span>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function PopupWithForm({\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  title,\r\n  buttonText,\r\n  children,\r\n  name,\r\n  isFormValid,\r\n}) {\r\n  return (\r\n    <Popup isOpen={isOpen} onClose={onClose}>\r\n      <form\r\n        className=\"popup__container\"\r\n        name={name}\r\n        noValidate\r\n        onSubmit={onSubmit}\r\n      >\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        {children}\r\n        <button\r\n          type=\"submit\"\r\n          className={`popup__save ${\r\n            !isFormValid && \"popup__save_display_error\"\r\n          }`}\r\n          disabled={!isFormValid && \"disabled\"}\r\n        >\r\n          {buttonText}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__exit-button\"\r\n          onClick={onClose}\r\n        ></button>\r\n      </form>\r\n    </Popup>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nimport Input from \"./ui/Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [validity, setValidity] = React.useState({\r\n    name: true,\r\n    description: true,\r\n  });\r\n  const [buttonText, setButtonText] = React.useState(\"Сохранить\");\r\n  const [name, setName] = React.useState(currentUser.name);\r\n  const [description, setDescription] = React.useState(currentUser.about);\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser) {\r\n      setName(currentUser.name);\r\n      setDescription(currentUser.about);\r\n    }\r\n  }, [currentUser, isOpen]);\r\n\r\n  const inputChangers = {\r\n    name: setName,\r\n    description: setDescription,\r\n  };\r\n\r\n  const inputHandler = (value, name, inputValidity) => {\r\n    inputChangers[name](value);\r\n    const newValidity = Object.assign({}, validity);\r\n    newValidity[name] = inputValidity;\r\n    setValidity(newValidity);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Сохранение...\");\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    })\r\n      .then(() => {\r\n        clearInput();\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setTimeout(() => {\r\n      setValidity({ name: true, description: true });\r\n      setButtonText(\"Сохранить\");\r\n    }, 200);\r\n  };\r\n\r\n  const isFormValid = () => {\r\n    return Object.values(validity).reduce((summ, currentItem) => {\r\n      return summ && currentItem;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={() => {\r\n        onClose();\r\n        clearInput();\r\n      }}\r\n      title=\"Редактировать профиль\"\r\n      name=\"edit\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid={isFormValid()}\r\n    >\r\n      <Input\r\n        type=\"text\"\r\n        className=\"popup__input\"\r\n        name=\"name\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        pattern=\"[ёЁА-Яа-яA-Za-z -]{1,}\"\r\n        value={name || \"\"}\r\n        update={isOpen}\r\n        onChange={inputHandler}\r\n      />\r\n      <Input\r\n        type=\"text\"\r\n        className=\"popup__input\"\r\n        name=\"description\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        update={isOpen}\r\n        value={description || \"\"}\r\n        onChange={inputHandler}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Input from \"./ui/Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const [buttonText, setButtonText] = React.useState(\"Сохранить\");\r\n  const [validity, setValidity] = React.useState(false);\r\n  const [url, setUrl] = React.useState(\"\");\r\n\r\n  const inputHandler = (value, name, validity) => {\r\n    setUrl(value);\r\n    setValidity(validity);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Сохранение...\");\r\n    onUpdateAvatar(url)\r\n      .then(() => {\r\n        clearInput();\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setTimeout(() => {\r\n      setUrl(\"\");\r\n      setButtonText(\"Сохранить\");\r\n    }, 200);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={() => {\r\n        onClose();\r\n        clearInput();\r\n      }}\r\n      title=\"Обновить аватар\"\r\n      name=\"avatar\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid={validity}\r\n    >\r\n      <Input\r\n        type=\"url\"\r\n        className=\"popup__input\"\r\n        pattern=\".+\\.(jpg|png)\"\r\n        name=\"avatar\"\r\n        required\r\n        placeholder=\"Введите ссылку\"\r\n        value={url}\r\n        update={isOpen}\r\n        onChange={inputHandler}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Input from \"./ui/Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n  const [buttonText, setButtonText] = React.useState(\"Создать\");\r\n  const [validity, setValidity] = React.useState({ title: false, url: false });\r\n  const [title, setTitle] = React.useState(\"\");\r\n  const [url, setUrl] = React.useState(\"\");\r\n\r\n  const inputChangers = {\r\n    title: setTitle,\r\n    url: setUrl,\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Создание...\");\r\n\r\n    onAddPlace({ name: title, link: url })\r\n      .then(() => {\r\n        clearInput();\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n\r\n  const inputHandler = (value, name, inputValidity) => {\r\n    inputChangers[name](value);\r\n    const newValidity = Object.assign({}, validity);\r\n    newValidity[name] = inputValidity;\r\n    setValidity(newValidity);\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setTimeout(() => {\r\n      setUrl(\"\");\r\n      setTitle(\"\");\r\n      setValidity({ title: false, url: false });\r\n      setButtonText(\"Создать\");\r\n    }, 200);\r\n  };\r\n\r\n  const isFormValid = () => {\r\n    return Object.values(validity).reduce((summ, currentItem) => {\r\n      return summ && currentItem;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={() => {\r\n        onClose();\r\n        clearInput();\r\n      }}\r\n      title=\"Новое место\"\r\n      name=\"add\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid={isFormValid()}\r\n    >\r\n      <Input\r\n        type=\"text\"\r\n        className=\"popup__input\"\r\n        name=\"title\"\r\n        required\r\n        placeholder=\"Название\"\r\n        minLength=\"1\"\r\n        maxLength=\"30\"\r\n        value={title || \"\"}\r\n        update={isOpen}\r\n        onChange={inputHandler}\r\n      />\r\n      <Input\r\n        type=\"url\"\r\n        className=\"popup__input\"\r\n        name=\"url\"\r\n        required\r\n        placeholder=\"Ссылка на картинку\"\r\n        update={isOpen}\r\n        value={url || \"\"}\r\n        onChange={inputHandler}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onDelete }) {\r\n  const [buttonText, setButtonText] = React.useState(\"Да\");\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Удаление...\");\r\n    onDelete()\r\n      .then(() => {\r\n        setButtonText(\"Да\");\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Вы уверены?\"\r\n      name=\"delete\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid\r\n    ></PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nexport default function ProtectedRoute({\r\n  component: Component,\r\n  forRegistered,\r\n  ...props\r\n}) {\r\n  return forRegistered ? (\r\n    <Route>\r\n      {() =>\r\n        !props.loggedIn ? <Component {...props} /> : <Redirect to=\"./\" />\r\n      }\r\n    </Route>\r\n  ) : (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sing-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport Input from \"./ui/Input\";\r\n\r\nexport default function Sign({ type, onSubmit }) {\r\n  const [buttonText, setButtonText] = React.useState(\r\n    type === \"in\" ? \"Войти\" : \"Зарегестрироваться\"\r\n  );\r\n  const [validity, setValidity] = React.useState({\r\n    email: false,\r\n    password: false,\r\n  });\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  const inputChangers = {\r\n    email: setEmail,\r\n    password: setPassword,\r\n  };\r\n\r\n  const inputHandler = (value, name, inputValidity) => {\r\n    inputChangers[name](value);\r\n    const newValidity = Object.assign({}, validity);\r\n    newValidity[name] = inputValidity;\r\n    setValidity(newValidity);\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setTimeout(() => {\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n      setValidity({ title: false, url: false });\r\n      setButtonText(type === \"in\" ? \"Войти\" : \"Зарегестрироваться\");\r\n    }, 200);\r\n  };\r\n\r\n  const isFormValid = () => {\r\n    return Object.values(validity).reduce((summ, currentItem) => {\r\n      return summ && currentItem;\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(type === \"in\" ? \"Вход...\" : \"Регистрация...\");\r\n    onSubmit({\r\n      password,\r\n      email,\r\n    })\r\n      .then((check) => {\r\n        if (!check) clearInput();\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Попробовать еще раз\");\r\n      });\r\n  };\r\n  return (\r\n    <main>\r\n      <form onSubmit={handleSubmit} className=\"sign\">\r\n        <h1 className=\"sign__title\">\r\n          {type === \"in\" ? \"Вход\" : \"Регистрация\"}\r\n        </h1>\r\n        <Input\r\n          place=\"sign\"\r\n          placeholder=\"Email\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          value={email || \"\"}\r\n          onChange={inputHandler}\r\n          required\r\n        />\r\n        <Input\r\n          place=\"sign\"\r\n          placeholder=\"Пароль\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          value={password || \"\"}\r\n          onChange={inputHandler}\r\n          minLength=\"3\"\r\n          maxLength=\"20\"\r\n          pattern=\"[\\d\\w]*\"\r\n          required\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className={`sign__button ${\r\n            !isFormValid() && \"sign__button_display_error\"\r\n          }`}\r\n          disabled={!isFormValid() && \"disabled\"}\r\n        >\r\n          {buttonText}\r\n        </button>\r\n        <p className=\"sign__subtitle\">\r\n          {type === \"in\"\r\n            ? \"Ещё не зарегистрированы? \"\r\n            : \"Уже зарегистрированы? \"}\r\n          <Link\r\n            className=\"sign__link\"\r\n            to={type === \"in\" ? \"/sign-up\" : \"/sign-in\"}\r\n          >\r\n            {type === \"in\" ? \"Регистрация\" : \"Войти\"}\r\n          </Link>\r\n        </p>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function InfoTooltip({ isOpen, onClose, status }) {\r\n  return (\r\n    <Popup isOpen={isOpen} onClose={onClose}>\r\n      <div className=\"popup__container\">\r\n        {!status ? (\r\n          <svg\r\n            className=\"popup__tool-image\"\r\n            width=\"120\"\r\n            height=\"120\"\r\n            viewBox=\"0 0 120 120\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M117 60C117 91.4802 91.4802 117 60 117C28.5198 117 3 91.4802 3 60C3 28.5198 28.5198 3 60 3C91.4802 3 117 28.5198 117 60ZM120 60C120 93.1371 93.1371 120 60 120C26.8629 120 0 93.1371 0 60C0 26.8629 26.8629 0 60 0C93.1371 0 120 26.8629 120 60ZM57.5502 76.888L86.7676 48.888L81.2324 43.112L54.4277 68.7999L39.3496 57.8561L34.6504 64.3305L52.433 77.2372L55.1375 79.2001L57.5502 76.888Z\"\r\n              fill=\"black\"\r\n            />\r\n          </svg>\r\n        ) : (\r\n          <svg\r\n            className=\"popup__tool-image\"\r\n            width=\"120\"\r\n            height=\"120\"\r\n            viewBox=\"0 0 120 120\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M60 117C91.4802 117 117 91.4802 117 60C117 28.5198 91.4802 3 60 3C28.5198 3 3 28.5198 3 60C3 91.4802 28.5198 117 60 117ZM60 120C93.1371 120 120 93.1371 120 60C120 26.8629 93.1371 0 60 0C26.8629 0 0 26.8629 0 60C0 93.1371 26.8629 120 60 120ZM55.0503 60.707L36.6655 42.3223L42.3224 36.6654L60.7071 55.0502L78.3848 37.3726L84.0416 43.0294L66.364 60.707L83.3346 77.6776L77.6777 83.3345L60.7071 66.3639L43.0294 84.0416L37.3726 78.3848L55.0503 60.707Z\"\r\n              fill=\"#FD0707\"\r\n            />\r\n          </svg>\r\n        )}\r\n        <h2 className=\"popup__tool-title\">\r\n          {\" \"}\r\n          {!status\r\n            ? \"Вы успешно зарегистрировались!\"\r\n            : `Что-то пошло не так! ${status}. Попробуйте ещё раз.`}\r\n        </h2>\r\n        <button className=\"popup__exit-button\" onClick={onClose}></button>\r\n      </div>\r\n    </Popup>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\r\n\r\nimport { api } from \"../utils/Api\";\r\nimport { register, checkToken, authorize } from \"../utils/auth.js\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport Main from \"./Main\";\r\nimport PopupWithImage from \"./PopupWithImage\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport DeleteCardPopup from \"./DeleteCardPopup\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport Sign from \"./Sign\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\n\r\nexport default function App() {\r\n  const [editPopupState, setEditPopupState] = React.useState(false);\r\n  const [addPopupState, setAddPopupState] = React.useState(false);\r\n  const [avatarPopupState, setAvatarPopupState] = React.useState(false);\r\n  const [deletePopupState, setDeletePopupState] = React.useState(false);\r\n  const [imgPopupState, setImgPopupState] = React.useState(false);\r\n  const [toolPopupState, setToolPopupState] = React.useState(false);\r\n  const [toolPopupStatus, setToolPopupStatus] = React.useState(\"\");\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [token, setToken] = React.useState(localStorage.getItem(\"token\") || \"\");\r\n  const [userEmail, setUserEmail] = React.useState(\"\");\r\n\r\n  const history = useHistory();\r\n  React.useEffect(() => {\r\n    if (token) {\r\n      checkToken(token)\r\n        .then((res) => {\r\n          if (res.data.email) {\r\n            setUserEmail(res.data.email);\r\n            setLoggedIn(true);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }, [token]);\r\n\r\n  const errShow = (err) => console.log(err);\r\n\r\n  const escHandler = (evt) => {\r\n    if (evt.key === \"Escape\") {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getUserInformation(), api.getInitialCards()])\r\n      .then((value) => {\r\n        setCurrentUser(value[0]);\r\n        setCards(value[1]);\r\n      })\r\n      .catch(errShow);\r\n  }, []);\r\n\r\n  const handleCardLike = (id, isLiked) => {\r\n    const likeShow = (newCard) => {\r\n      const newCards = cards.map((card) =>\r\n        card._id === newCard._id ? newCard : card\r\n      );\r\n      setCards(newCards);\r\n    };\r\n    if (isLiked) {\r\n      api.deleteLike(id).then(likeShow).catch(errShow);\r\n    } else {\r\n      api.setLike(id).then(likeShow).catch(errShow);\r\n    }\r\n  };\r\n\r\n  const handleCardDelete = (id) => {\r\n    setSelectedCard({ id });\r\n    setDeletePopupState(true);\r\n    document.addEventListener(\"keydown\", escHandler);\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setEditPopupState(false);\r\n    setAddPopupState(false);\r\n    setAvatarPopupState(false);\r\n    setDeletePopupState(false);\r\n    setImgPopupState(false);\r\n    setToolPopupState(false);\r\n    setSelectedCard({});\r\n    document.removeEventListener(\"keydown\", escHandler);\r\n  };\r\n\r\n  const isEditProfilePopupOpen = () => {\r\n    setEditPopupState(true);\r\n    document.addEventListener(\"keydown\", escHandler);\r\n  };\r\n\r\n  const isAddPlacePopupOpen = () => {\r\n    setAddPopupState(true);\r\n    document.addEventListener(\"keydown\", escHandler);\r\n  };\r\n\r\n  const isEditAvatarPopupOpen = () => {\r\n    setAvatarPopupState(true);\r\n    document.addEventListener(\"keydown\", escHandler);\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setImgPopupState(true);\r\n    setSelectedCard(card);\r\n    document.addEventListener(\"keydown\", escHandler);\r\n  };\r\n\r\n  const handleUpdateUser = async (object) => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .setUserInfo(object)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const handleUpdateAvatar = async (avatar) => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .setUserAvatar({ avatar })\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const handleAddPlaceSubmit = async (card) => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .createCard(card)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const handleDeleteSubmit = async () => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .deleteCard(selectedCard.id)\r\n      .then((card) => {\r\n        const newCards = cards.filter((card) => card._id !== selectedCard.id);\r\n        setCards(newCards);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const onRegister = async (user) => {\r\n    let isSucssesful = false;\r\n    await register(user)\r\n      .then(() => {\r\n        isSucssesful = true;\r\n        setToolPopupState(true);\r\n        history.push(\"/sing-in\");\r\n      })\r\n      .catch((message) => {\r\n        message.then((data) => setToolPopupStatus(data.message || data.error));\r\n        setToolPopupState(true);\r\n      });\r\n    if (isSucssesful) {\r\n      return Promise.resolve(true);\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const onAuthorize = async (user) => {\r\n    let isSucssesful = false;\r\n    await authorize(user)\r\n      .then((res) => {\r\n        isSucssesful = true;\r\n        console.log(res, \"tutu\");\r\n        if (res.token) {\r\n          setToken(res.token);\r\n          localStorage.setItem(\"token\", res.token);\r\n          setLoggedIn(true);\r\n          setUserEmail(user.email);\r\n        }\r\n      })\r\n      .catch((message) => {\r\n        message.then((data) => setToolPopupStatus(data.message || data.error));\r\n        setToolPopupState(true);\r\n      });\r\n    if (isSucssesful) {\r\n      return Promise.resolve(true);\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const onLogOut = () => {\r\n    localStorage.removeItem(\"token\");\r\n    setToken(\"\");\r\n    setUserEmail(\"\");\r\n    setLoggedIn(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header email={userEmail} onExit={onLogOut} />\r\n\r\n        <Switch>\r\n          <ProtectedRoute\r\n            path=\"/sign-in\"\r\n            component={Sign}\r\n            forRegistered\r\n            loggedIn={loggedIn}\r\n            type=\"in\"\r\n            key=\"1\"\r\n            onSubmit={onAuthorize}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/sign-up\"\r\n            component={Sign}\r\n            forRegistered\r\n            loggedIn={loggedIn}\r\n            type=\"up\"\r\n            key=\"2\"\r\n            onSubmit={onRegister}\r\n          />\r\n\r\n          <ProtectedRoute\r\n            exact\r\n            path=\"/\"\r\n            component={Main}\r\n            loggedIn={loggedIn}\r\n            onEditAvatar={isEditAvatarPopupOpen}\r\n            onEditProfile={isEditProfilePopupOpen}\r\n            onAddPlace={isAddPlacePopupOpen}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onLike={handleCardLike}\r\n            onDelete={handleCardDelete}\r\n          />\r\n          <Route path=\"/\">\r\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n          </Route>\r\n        </Switch>\r\n\r\n        <Footer />\r\n        <PopupWithImage\r\n          onClose={closeAllPopups}\r\n          card={selectedCard}\r\n          isOpen={imgPopupState}\r\n        />\r\n        <EditProfilePopup\r\n          isOpen={editPopupState}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={avatarPopupState}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={addPopupState}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n        <DeleteCardPopup\r\n          isOpen={deletePopupState}\r\n          onClose={closeAllPopups}\r\n          onDelete={handleDeleteSubmit}\r\n        />\r\n        <InfoTooltip\r\n          isOpen={toolPopupState}\r\n          onClose={closeAllPopups}\r\n          status={toolPopupStatus}\r\n        />\r\n      </CurrentUserContext.Provider>\r\n    </>\r\n  );\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App.js\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}